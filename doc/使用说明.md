# 使用说明

##### 编译说明

硬盘启动调用`./hdboot.sh`即可，该脚本会调用`make all`和`make hdimg`分别生成二进制文件和磁盘镜像，要清除编译产生的文件使用`make clean/ make realclean`

##### 功能使用说明

###### 硬盘镜像生成

在项目根目录下调用`./mkimg.sh`即可。

注意在不同的系统中可能生成的镜像的DBR位置不同，需要辛苦您生成镜像之后运行`xxd -a0 -g1 disk.img`命令，定位到DBR的地址和根目录的地址，将其按照根目录相对于DBR的字节偏移+DBR相对于0的字节偏移写入`boot/include/load.inc`中的ROOT_BASE_ADDR中。

###### CFS调度系统

在`kernel/main.c`中的测试点1即为CFS调度系统，需要添加任务则分别对`task_table`和`proc_table`扩容并加入相关进程，然后调用`kernel/proc.c`中的`add_task`即可。注意全局统计数组stat[]也扩容一下。

###### 物理页帧分配、页表映射机制、堆空间管理功能测试

在`kernel/main.c`中取消注释测试点2，并将`vmem_en`宏置为0关闭虚拟内存即可开始测试，正确结果为前后都输出恒等映射。

###### 共享内存

在`kernel/main.c`中取消注释`TestA`函数中的测试点3,以及`TestB`函数中的测试点4以及`kernel_main`函数中的测试点3的两个`kmap`即可开始测试，正确结果为tty0输出S。

###### PageFault触发

在`kernel/main.c`的`kernel_main`函数中注释掉刚才所述的测试点3的两个`kmap`，而`TestA/TestB`依旧访问这个没映射的地址。正确结果为会一直输出page_fault并打印缺页的访问地址。